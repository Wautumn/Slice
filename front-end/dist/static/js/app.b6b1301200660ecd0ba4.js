webpackJsonp([18],{0:function(e,t){},"7fiP":function(e,t){},A0hB:function(e,t,n){"use strict";function a(e,t,n){var a=new Date;a.setSeconds(a.getSeconds()+n),document.cookie=e+"="+escape(t)+"; expires="+a.toGMTString(),console.log(document.cookie)}t.c=a,t.b=function(e){if(document.cookie.length>0){var t=document.cookie.indexOf(e+"=");if(-1!=t){t=t+e.length+1;var n=document.cookie.indexOf(";",t);return-1==n&&(n=document.cookie.length),unescape(document.cookie.substring(t,n))}}return""},t.a=function(e){a(e,"",-1)}},E4d3:function(e,t,n){var a={"./AdminFeedHandle":["XKqf",0,4],"./AdminFeedHandle.vue":["XKqf",0,4],"./Advice":["/MbK",0,12],"./Advice.vue":["/MbK",0,12],"./AnalyHis":["QvSL",0,11],"./AnalyHis.vue":["QvSL",0,11],"./DayView1":["uNDi",0,15],"./DayView1.vue":["uNDi",0,15],"./FeedBack":["/2YP",2],"./FeedBack.vue":["/2YP",2],"./FeedList":["rbjX",3],"./FeedList.vue":["rbjX",3],"./FrontPage":["nmjb",1],"./FrontPage.vue":["nmjb",1],"./Goal":["CtpA",0,14],"./Goal.vue":["CtpA",0,14],"./Header":["teIl"],"./Header.vue":["teIl"],"./Login":["xJsL",5],"./Login.vue":["xJsL",5],"./MonthView1":["3Ogo",0,13],"./MonthView1.vue":["3Ogo",0,13],"./NavMenu":["4IEm",16],"./NavMenu.vue":["4IEm",16],"./PomoMode":["RtVQ",0,8],"./PomoMode.vue":["RtVQ",0,8],"./Recom":["5sKn",7],"./Recom.vue":["5sKn",7],"./Register":["dIqY",6],"./Register.vue":["dIqY",6],"./TaskList":["fU07",0],"./TaskList.vue":["fU07",0],"./TaskMode":["v5Mt",0,9],"./TaskMode.vue":["v5Mt",0,9],"./WeekView2":["M8jP",0,10],"./WeekView2.vue":["M8jP",0,10]};function o(e){var t=a[e];return t?Promise.all(t.slice(1).map(n.e)).then(function(){return n(t[0])}):Promise.reject(new Error("Cannot find module '"+e+"'."))}o.keys=function(){return Object.keys(a)},o.id="E4d3",e.exports=o},LPjf:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("xd7I"),o={name:"app",components:{vheader:n("teIl").default},data:function(){return{userId:sessionStorage.userId,isVerified:!1,load:!0}},methods:{userSignIn:function(e){sessionStorage.userId&&parseInt(sessionStorage.userId)!==e&&(console.log(e),localStorage.clear(),deleteDB("weekDB"),deleteDB("daySumDB"),deleteDB("dayTaskDB"),deleteDB("dayTomoDB")),sessionStorage.userId=e,this.userId=sessionStorage.userId,sessionStorage.isVerified=!0,this.isVerified=!0,this.loading()},logOut:function(){console.log("logOut"),this.isVerified=!1},loading:function(){var e=this;this.load=!1,this.$nextTick(function(){e.load=!0})},reload:function(){console.log("header重载反馈"),this.isVerified=!0}}},s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("el-container",[t("el-header",{staticClass:"header"},[this.load?t("vheader",{attrs:{isVerified:this.isVerified},on:{logOut:this.logOut,reload:this.reload}}):this._e()],1),this._v(" "),t("router-view",{on:{userSignIn:this.userSignIn}})],1)],1)},staticRenderFns:[]},i=n("C7Lr")(o,s,!1,null,null,null).exports,l=n("KGCO"),c=n("g5HH"),r=n("go35");a.default.use(l.a);var u=[],m=[];c.a.forEach(function(e){u.push({path:"/"+e.componentName,name:e.componentName,component:function(){return n("E4d3")("./"+e.componentName)}})}),r.a.forEach(function(e){e.sub.forEach(function(e){m.push({path:"/"+e.componentName,name:e.componentName,component:function(){return n("E4d3")("./"+e.componentName)}})})}),u[2].children=m,u.push({path:"/Login",name:"Login",component:function(){return n.e(5).then(n.bind(null,"xJsL"))}}),u.push({path:"/Reg",name:"Reg",component:function(){return n.e(6).then(n.bind(null,"dIqY"))}}),u.push({path:"/",name:"FrontPage",component:function(){return n.e(1).then(n.bind(null,"nmjb"))}}),u.push({path:"/FeedBack",name:"FeedBack",component:function(){return n.e(2).then(n.bind(null,"/2YP"))}}),u.push({path:"/FeedList",name:"FeedList",component:function(){return n.e(3).then(n.bind(null,"rbjX"))}}),u.push({path:"/Admin",name:"FeedHandle",component:function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,"XKqf"))}});var h=new l.a({routes:u}),d=n("OolZ"),p=n("rflr"),g=n.n(p),v=(n("t0aP"),n("BGpr")),f=n.n(v);n("7fiP");a.default.config.productionTip=!1,a.default.use(g.a),a.default.use(d.a),a.default.use(f.a),new a.default({el:"#app",router:h,components:{App:i},template:"<App/>"})},g5HH:function(e,t,n){"use strict";t.a=[{name:"任务模式",id:"mode1",componentName:"TaskMode"},{name:"番茄模式",id:"mode2",componentName:"PomoMode"},{name:"历史分析",id:"HA",componentName:"AnalyHis"},{name:"推荐",id:"RA",componentName:"Recom"},{name:"反馈",id:"FL",componentName:"FeedList"}]},go35:function(e,t,n){"use strict";t.a=[{name:"历史记录",id:"record",icon:"th-large",sub:[{name:"日视图",componentName:"DayView1"},{name:"月视图",componentName:"MonthView1"}]},{name:"建议&分析",id:"analysis",icon:"wpforms",sub:[{name:"统计分析",componentName:"WeekView2"},{name:"建议",componentName:"Advice"},{name:"目标",componentName:"Goal"}]}]},t0aP:function(e,t){},teIl:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("g5HH"),o=n("A0hB"),s={data:function(){return{imageUrl:"",username:"",email:"",activeIndex:"3",activeIndex2:"2",accountShow:!1,changeName:!1,changePass:!1,taskShow:!1,dayGoal:1,weekGoal:7,monthGoal:30,pomoTime:25,restTime:5,nameValue:"",changeMail:!1,mailValue:"",originalPW:"",newPW:"",Menus:a.a,userId:null}},mounted:function(){console.log("header重载"),sessionStorage.userId&&this.$emit("reload"),this.userId=sessionStorage.userId,this.username=sessionStorage.username,this.email=sessionStorage.email,this.dayGoal=parseInt(sessionStorage.dayGoal),this.weekGoal=parseInt(sessionStorage.weekGoal),this.monthGoal=parseInt(sessionStorage.monthGoal),sessionStorage.tomoLength&&(this.pomoTime=parseInt(sessionStorage.tomoLength))},props:["isVerified"],methods:{handleAvatarSuccess:function(e,t){this.imageUrl=URL.createObjectURL(t.raw)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,n=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),n||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&n},passChange:function(){var e=this;if(console.log("修改密码"),this.newPW&&this.originalPW){var t={oldPassword:this.originalPW,newPassword:this.newPW,userId:this.userId};this.$http.post("http://localhost:8080/changePassword ",t,{emulateJSON:!0}).then(function(t){1==t.body&&e.$Message.info("密码修改成功")}).catch(function(t){console.log("fail"),e.$Message.info("密码修改失败")})}else this.$Message.info("请输入密码")},accountTab:function(e){console.log(e),this.changePass="name2"==e},logOut:function(){this.$emit("logOut"),Object(o.a)("userid"),sessionStorage.userId="",this.$router.push({name:"FrontPage"})},handleSelect:function(e,t){console.log(e,t)},timeChange:function(){var e=this;console.log("changeTime&Goal"),this.$http.get("http://localhost:8080/changeTomatoLength ",{params:{userId:this.userId,tomatoLength:this.pomoTime}}).then(function(t){sessionStorage.tomoLength=e.pomoTime}).catch(function(){console.log("番茄时间修改失败")}),this.$http.get("http://localhost:8080/changeDayGoal ",{params:{userId:this.userId,dayGoal:this.dayGoal}}).then(function(t){sessionStorage.dayGoal=e.dayGoal}).catch(function(){console.log("每日目标修改失败")}),this.$http.get("http://localhost:8080/changeWeekGoal ",{params:{userId:this.userId,weekGoal:this.weekGoal}}).then(function(t){sessionStorage.weekGoal=e.weekGoal}).catch(function(){console.log("每周目标修改失败")}),this.$http.get("http://localhost:8080/changeMonthGoal ",{params:{userId:this.userId,monthGoal:this.monthGoal}}).then(function(t){sessionStorage.monthGoal=e.monthGoal}).catch(function(){console.log("每月目标修改失败")})},mailChange:function(){var e=this;console.log("changeMail"),this.mailValue?this.$http.get("http://localhost:8080/changeEmail ",{params:{userId:this.userId,email:this.mailValue}}).then(function(t){e.$Message.info("邮箱修改成功")}).catch(function(){console.log("邮箱修改失败"),e.$Message.info("邮箱修改失败")}):this.$Message.info("请输入有效的邮箱地址")},nameChange:function(){var e=this;console.log("changeName"),this.nameValue?this.$http.get("http://localhost:8080/changeUsername ",{params:{userId:this.userId,username:this.nameValue}}).then(function(t){e.$Message.info("昵称修改成功")}).catch(function(){console.log("昵称修改失败"),e.$Message.info("昵称修改失败")}):this.$Message.info("请输入有效的昵称")},ok:function(){this.$Message.info("确认提交")},cancel:function(){},ToReg:function(){console.log("register"),this.$router.push({name:"Reg"})},ToLog:function(){console.log("login"),this.$router.push({name:"Login"})},doSetting:function(){console.log("打开"),this.accountShow=!0,this.changeName=this.changeMail=!1}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.activeIndex,"active-text-color":"#FF2D00",mode:"horizontal",router:""},on:{select:e.handleSelect}},[n("a",{staticClass:"HeaderTitle",attrs:{href:"/"}},[n("span",[e._v("Growth")])]),e._v(" "),e._l(e.Menus,function(t){return e.isVerified?n("el-menu-item",{key:t.id,attrs:{index:t.componentName},domProps:{textContent:e._s(t.name)}}):e._e()}),e._v(" "),e.isVerified?n("el-submenu",{attrs:{index:"2"}},[n("template",{slot:"title"},[e._v("设置")]),e._v(" "),n("el-menu-item",{attrs:{index:"2-1",route:{path:this.$route.path}},on:{click:e.doSetting}},[e._v("账户设置")]),e._v(" "),n("el-menu-item",{attrs:{index:"2-2",route:{path:this.$route.path}},on:{click:function(t){e.taskShow=!0}}},[e._v("任务设置")]),e._v(" "),n("el-menu-item",{attrs:{index:"2-3",route:{path:this.$route.path}},on:{click:e.logOut}},[e._v("退出")])],2):e._e(),e._v(" "),e.isVerified?e._e():n("el-button",{staticClass:"reg-button",attrs:{type:"success",size:"small"},on:{click:e.ToReg}},[e._v("注册")]),e._v(" "),e.isVerified?e._e():n("el-button",{staticClass:"log-button",attrs:{type:"text",size:"small"},on:{click:e.ToLog}},[e._v("登录")])],2),e._v(" "),n("Modal",{attrs:{width:"400"},on:{"on-ok":e.ok,"on-cancel":e.cancel},model:{value:e.accountShow,callback:function(t){e.accountShow=t},expression:"accountShow"}},[n("Tabs",{attrs:{value:"name1"},on:{"on-click":e.accountTab}},[n("TabPane",{attrs:{label:"账号",name:"name1"}},[n("div",[n("label",{staticClass:"one-line"},[e._v("昵称：")]),e._v(" "),e.changeName?n("div",{staticClass:"one-line"},[n("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"Enter something..."},model:{value:e.nameValue,callback:function(t){e.nameValue=t},expression:"nameValue"}}),e._v(" "),n("Button",{on:{click:e.nameChange}},[e._v("保存")])],1):n("div",{staticClass:"one-line"},[n("span",[e._v(e._s(e.username))]),e._v(" "),n("Button",{attrs:{type:"text"},on:{click:function(t){e.changeName=!0}}},[e._v("更换")])],1)]),e._v(" "),n("br"),e._v(" "),n("div",[n("label",{staticClass:"one-line"},[e._v("邮箱：")]),e._v(" "),e.changeMail?n("div",{staticClass:"one-line"},[n("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"Enter something..."},model:{value:e.mailValue,callback:function(t){e.mailValue=t},expression:"mailValue"}}),e._v(" "),n("Button",{on:{click:e.mailChange}},[e._v("保存")])],1):n("div",{staticClass:"one-line"},[n("span",[e._v(e._s(e.email))]),e._v(" "),n("Button",{attrs:{type:"text"},on:{click:function(t){e.changeMail=!0}}},[e._v("更换")])],1)])]),e._v(" "),n("TabPane",{attrs:{label:"账号安全",name:"name2"}},[n("div",[e._v("原密码:\n          "),n("Input",{staticClass:"input-item",attrs:{type:"password",placeholder:"请输入原密码"},model:{value:e.originalPW,callback:function(t){e.originalPW=t},expression:"originalPW"}})],1),e._v(" "),n("br"),e._v(" "),n("div",[e._v("新密码:\n          "),n("Input",{staticClass:"input-item",attrs:{type:"password",placeholder:"请输入新密码"},model:{value:e.newPW,callback:function(t){e.newPW=t},expression:"newPW"}})],1)]),e._v(" "),n("TabPane",{attrs:{label:"修改头像",name:"name3"}},[n("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?n("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):n("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),e._v(" "),e.changePass?n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"error"},on:{click:e.passChange}},[e._v("确认")])],1):e._e()],1),e._v(" "),n("Modal",{on:{"on-ok":e.timeChange,"on-cancel":e.cancel},model:{value:e.taskShow,callback:function(t){e.taskShow=t},expression:"taskShow"}},[n("Tabs",{attrs:{value:"name1"}},[n("TabPane",{attrs:{label:"目标设置",name:"name1"}},[n("div",{staticClass:"one-line"},[n("span",[e._v("每日目标")]),e._v(" "),n("InputNumber",{staticClass:"input-number",attrs:{min:1},model:{value:e.dayGoal,callback:function(t){e.dayGoal=t},expression:"dayGoal"}}),e._v(" "),n("span",[e._v("个番茄")])],1),e._v(" "),n("br"),e._v(" "),n("div",{staticClass:"one-line"},[n("span",[e._v("每周目标")]),e._v(" "),n("InputNumber",{staticClass:"input-number",attrs:{min:1},model:{value:e.weekGoal,callback:function(t){e.weekGoal=t},expression:"weekGoal"}}),e._v(" "),n("span",[e._v("个番茄")])],1),e._v(" "),n("br"),e._v(" "),n("div",{staticClass:"one-line"},[n("span",[e._v("每月目标")]),e._v(" "),n("InputNumber",{staticClass:"input-number",attrs:{min:1},model:{value:e.monthGoal,callback:function(t){e.monthGoal=t},expression:"monthGoal"}}),e._v(" "),n("span",[e._v("个番茄")])],1)]),e._v(" "),n("TabPane",{attrs:{label:"番茄设置",name:"name2"}},[n("div",{staticClass:"one-line"},[n("span",[e._v("番茄时间")]),e._v(" "),n("InputNumber",{staticClass:"input-number",attrs:{min:10},model:{value:e.pomoTime,callback:function(t){e.pomoTime=t},expression:"pomoTime"}}),e._v(" "),n("span",[e._v("分钟")])],1),e._v(" "),n("br"),e._v(" "),n("div",{staticClass:"one-line"},[n("span",[e._v("休息时间")]),e._v(" "),n("InputNumber",{staticClass:"input-number",attrs:{min:1},model:{value:e.restTime,callback:function(t){e.restTime=t},expression:"restTime"}}),e._v(" "),n("span",[e._v("分钟")])],1)])],1)],1)],1)},staticRenderFns:[]};var l=n("C7Lr")(s,i,!1,function(e){n("LPjf")},null,null);t.default=l.exports}},["NHnr"]);
//# sourceMappingURL=app.b6b1301200660ecd0ba4.js.map