{"version":3,"sources":["webpack:///src/components/Login.vue","webpack:///./src/components/Login.vue?6836","webpack:///./src/components/Login.vue"],"names":["Login","data","showTishi","tishi","username","password","props","mounted","userId","Object","cookie","this","$emit","$router","push","console","log","methods","ToRegister","name","logInSuccess","userID","setTimeout","bind","login","_this","alert","$http","post","emulateJSON","then","res","code","body","sessionStorage","email","tomoLength","dayGoal","weekGoal","monthGoal","catch","components_Login","render","_vm","_h","$createElement","_c","_self","staticClass","on","keyup","$event","type","indexOf","_k","keyCode","key","_v","directives","rawName","value","expression","_s","attrs","placeholder","clearable","model","callback","$$v","round","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/5.df6cf460e45829918f9e.js","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"login-wrap\" @keyup.enter=\"login\">\r\n      <h3>登录</h3>\r\n      <p v-show=\"showTishi\">{{tishi}}</p>\r\n      <el-input class=\"input\" placeholder=\"请输入用户名\" v-model=\"username\" clearable></el-input>\r\n      <br>\r\n      <el-input class=\"input\" placeholder=\"请输入密码\" v-model=\"password\" type=\"password\" clearable></el-input>\r\n      <br>\r\n      <el-button type=\"primary\" @click=\"login\" round class=\"button\">登录</el-button>\r\n      <!-- <button v-on:click=\"login\">登录</button> -->\r\n      <span v-on:click=\"ToRegister\">没有账号？马上注册</span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n.login-wrap {\r\n  text-align: center;\r\n  margin-top: 50px;\r\n}\r\n.register-wrap {\r\n  text-align: center;\r\n  margin-top: 50px;\r\n}\r\n\r\n.input {\r\n  width: 18%;\r\n  margin: 0 auto;\r\n  margin-bottom: 7px;\r\n  padding: 8px;\r\n}\r\np {\r\n  color: red;\r\n}\r\n\r\n.button {\r\n  display: block;\r\n  width: 200px;\r\n  height: 40px;\r\n  margin: 0 auto;\r\n  margin-bottom: 5px;\r\n}\r\n\r\nspan {\r\n  cursor: pointer;\r\n}\r\nspan:hover {\r\n  color: #41b883;\r\n}\r\n\r\nh3 {\r\n  margin-bottom: 10px;\r\n}\r\n</style>\r\n\r\n<script>\r\nimport { setCookie, getCookie } from \"../assets/cookie.js\";\r\n\r\nvar loginurl = \"http://localhost:8080/logIn\";\r\nvar regiurl = \"http://localhost:8080/signUp\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      showTishi: false,\r\n      tishi: \"\",\r\n      username: \"\",\r\n      password: \"\"\r\n    };\r\n  },\r\n  props: [\"isReg\"],\r\n  mounted() {\r\n    /*页面挂载获取cookie，如果存在username的cookie，则跳转到主页，不需登录*/\r\n    var userId = getCookie(\"userid\");\r\n    if (userId) {\r\n      //修改\r\n      this.$emit(\"userSignIn\", userId);\r\n      this.$router.push(\"/PomoMode\");\r\n      console.log(\"cookie exist\");\r\n    }\r\n  },\r\n  methods: {\r\n    ToRegister() {\r\n      console.log(\"register\");\r\n      this.$router.push({ name: \"Reg\" });\r\n    },\r\n    logInSuccess(userID) {\r\n      /*向父组件传值*/\r\n      this.$emit(\"userSignIn\", userID);\r\n      setCookie(\"userid\", userID, 1000 * 60);\r\n      setTimeout(\r\n        function() {\r\n          this.$router.push(\"/PomoMode\");\r\n        }.bind(this),\r\n        1000\r\n      );\r\n    },\r\n    login() {\r\n      if (this.username == \"\" || this.password == \"\") {\r\n        alert(\"请输入用户名或密码\");\r\n      } else if (this.username == \"admin\") {\r\n        this.$router.push(\"/Admin\");\r\n      } else {\r\n        let data = { password: this.password, username: this.username };\r\n        /*接口请求*/\r\n        this.$http\r\n          .post(loginurl, data, { emulateJSON: true })\r\n          .then(res => {\r\n            console.log(res);\r\n            res = res.body;\r\n            var code = res[0];\r\n            sessionStorage.username = res[1];\r\n            sessionStorage.email = res[2];\r\n            sessionStorage.tomoLength = res[4];\r\n            sessionStorage.dayGoal = res[5];\r\n            sessionStorage.weekGoal = res[6];\r\n            sessionStorage.monthGoal = res[7];\r\n            /*接口的传值是(-1,该用户不存在),(0,密码错误)，同时还会检测管理员账号的值*/\r\n            if (code == \"No user!\") {\r\n              this.tishi = \"该用户不存在\";\r\n              this.showTishi = true;\r\n            } else if (code == \"Wrong password!\") {\r\n              this.tishi = \"密码输入错误\";\r\n              this.showTishi = true;\r\n              // this.logInSuccess(2);\r\n            } else {\r\n              // debugger;\r\n              this.tishi = \"登录成功\";\r\n              this.showTishi = true;\r\n              // var userID = code;\r\n              this.logInSuccess(code);\r\n            }\r\n          })\r\n          .catch(res => {\r\n            console.log(\"fail\");\r\n          });\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\n\n\n// WEBPACK FOOTER //\n// src/components/Login.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"login-wrap\",on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.login($event)}}},[_c('h3',[_vm._v(\"登录\")]),_vm._v(\" \"),_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showTishi),expression:\"showTishi\"}]},[_vm._v(_vm._s(_vm.tishi))]),_vm._v(\" \"),_c('el-input',{staticClass:\"input\",attrs:{\"placeholder\":\"请输入用户名\",\"clearable\":\"\"},model:{value:(_vm.username),callback:function ($$v) {_vm.username=$$v},expression:\"username\"}}),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('el-input',{staticClass:\"input\",attrs:{\"placeholder\":\"请输入密码\",\"type\":\"password\",\"clearable\":\"\"},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('el-button',{staticClass:\"button\",attrs:{\"type\":\"primary\",\"round\":\"\"},on:{\"click\":_vm.login}},[_vm._v(\"登录\")]),_vm._v(\" \"),_c('span',{on:{\"click\":_vm.ToRegister}},[_vm._v(\"没有账号？马上注册\")])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-457bade2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/Login.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-457bade2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./Login.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./Login.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./Login.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-457bade2\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./Login.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-457bade2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Login.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}