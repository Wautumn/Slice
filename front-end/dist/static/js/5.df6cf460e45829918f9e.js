webpackJsonp([5],{xJsL:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var o=t("A0hB"),i={data:function(){return{showTishi:!1,tishi:"",username:"",password:""}},props:["isReg"],mounted:function(){var e=Object(o.b)("userid");e&&(this.$emit("userSignIn",e),this.$router.push("/PomoMode"),console.log("cookie exist"))},methods:{ToRegister:function(){console.log("register"),this.$router.push({name:"Reg"})},logInSuccess:function(e){this.$emit("userSignIn",e),Object(o.c)("userid",e,6e4),setTimeout(function(){this.$router.push("/PomoMode")}.bind(this),1e3)},login:function(){var e=this;if(""==this.username||""==this.password)alert("请输入用户名或密码");else if("admin"==this.username)this.$router.push("/Admin");else{var s={password:this.password,username:this.username};this.$http.post("http://localhost:8080/logIn",s,{emulateJSON:!0}).then(function(s){console.log(s);var t=(s=s.body)[0];sessionStorage.username=s[1],sessionStorage.email=s[2],sessionStorage.tomoLength=s[4],sessionStorage.dayGoal=s[5],sessionStorage.weekGoal=s[6],sessionStorage.monthGoal=s[7],"No user!"==t?(e.tishi="该用户不存在",e.showTishi=!0):"Wrong password!"==t?(e.tishi="密码输入错误",e.showTishi=!0):(e.tishi="登录成功",e.showTishi=!0,e.logInSuccess(t))}).catch(function(e){console.log("fail")})}}}},n={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("div",{staticClass:"login-wrap",on:{keyup:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.login(s)}}},[t("h3",[e._v("登录")]),e._v(" "),t("p",{directives:[{name:"show",rawName:"v-show",value:e.showTishi,expression:"showTishi"}]},[e._v(e._s(e.tishi))]),e._v(" "),t("el-input",{staticClass:"input",attrs:{placeholder:"请输入用户名",clearable:""},model:{value:e.username,callback:function(s){e.username=s},expression:"username"}}),e._v(" "),t("br"),e._v(" "),t("el-input",{staticClass:"input",attrs:{placeholder:"请输入密码",type:"password",clearable:""},model:{value:e.password,callback:function(s){e.password=s},expression:"password"}}),e._v(" "),t("br"),e._v(" "),t("el-button",{staticClass:"button",attrs:{type:"primary",round:""},on:{click:e.login}},[e._v("登录")]),e._v(" "),t("span",{on:{click:e.ToRegister}},[e._v("没有账号？马上注册")])],1)])},staticRenderFns:[]};var r=t("C7Lr")(i,n,!1,function(e){t("zFFG")},"data-v-457bade2",null);s.default=r.exports},zFFG:function(e,s){}});
//# sourceMappingURL=5.df6cf460e45829918f9e.js.map